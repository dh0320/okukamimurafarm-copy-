
/* ========== Design Tokens (CSS Variables) ========== */
:root{
  --bg: #FAFAF7;
  --surface: #FFFFFF;
  --surface-2: #F3F4F0;
  --text: #1C1F1D;
  --muted: #5C625E;
  --border: #E6E8E2;
  --primary: #2F6B3E;
  --primary-2: #214E2C;
  --accent: #8A2E2E;

  --radius-lg: 16px;
  --radius-md: 12px;
  --radius-sm: 10px;

  --shadow-1: 0 8px 24px rgba(0,0,0,0.06);

  --container: 1200px;
  --gutter: 16px;

  --header-h: 72px;
}

/* Phase-based subtle atmosphere (keep realistic) */
body[data-phase="1"]{
  --bg: #FAFAF7;
}
body[data-phase="2"]{
  --bg: #F9FAF6;
}
body[data-phase="3"]{
  --bg: #F6F7F3;
}
body[data-phase="4"]{
  --bg: #F6F7F3;
}

/* ========== Base ========== */
*{ box-sizing:border-box; }
html, body{ height:100%; }
body{
  margin:0;
  font-family: system-ui, -apple-system, "Hiragino Kaku Gothic ProN", "Noto Sans JP", "Segoe UI", Roboto, Arial, sans-serif;
  color: var(--text);
  background: var(--bg);
  line-height: 1.7;
}

a{ color: inherit; text-decoration: none; }
a:hover{ text-decoration: none; }
img{ max-width:100%; display:block; }

.container{
  max-width: var(--container);
  margin: 0 auto;
  padding: 0 var(--gutter);
}

.skip-link{
  position:absolute;
  left:-9999px;
  top:auto;
  width:1px;
  height:1px;
  overflow:hidden;
}
.skip-link:focus{
  left:16px;
  top:16px;
  width:auto;
  height:auto;
  padding:10px 14px;
  background: var(--surface);
  border:1px solid var(--border);
  border-radius: 10px;
  box-shadow: var(--shadow-1);
  z-index: 1000;
}

:focus-visible{
  outline: 3px solid rgba(47,107,62,0.35);
  outline-offset: 2px;
  border-radius: 10px;
}

/* ========== Header ========== */
.site-header{
  position: sticky;
  top: 0;
  z-index: 50;
  background: rgba(250,250,247,0.75);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid transparent;
  transition: border-color .2s ease, background .2s ease;
}
.site-header.scrolled{
  border-bottom-color: var(--border);
  background: rgba(255,255,255,0.85);
}

.header-inner{
  height: var(--header-h);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 16px;
}

.brand{
  display:flex;
  align-items:center;
  gap: 12px;
  min-width: 220px;
}
.brand-mark{
  width: 34px;
  height: 34px;
  border-radius: 999px;
  background: radial-gradient(circle at 30% 30%, rgba(47,107,62,.95), rgba(47,107,62,.65));
  box-shadow: 0 10px 22px rgba(47,107,62,0.18);
}
.brand-text{
  display:flex;
  flex-direction:column;
  line-height:1.2;
}
.brand-name{
  font-weight: 700;
  letter-spacing: 0.02em;
}
.brand-tagline{
  font-size: 12px;
  color: var(--muted);
  margin-top: 2px;
}

.nav{
  display:flex;
  gap: 18px;
  align-items:center;
  justify-content:center;
  flex: 1;
}
.nav-link{
  font-size: 13px;
  color: rgba(28,31,29,0.84);
  padding: 10px 8px;
  border-radius: 10px;
  transition: background .15s ease, color .15s ease;
}
.nav-link:hover{
  background: rgba(47,107,62,0.06);
  color: rgba(28,31,29,1);
}
.nav-link.active{
  background: rgba(47,107,62,0.10);
  color: rgba(28,31,29,1);
}

.header-actions{
  display:flex;
  gap: 10px;
  align-items:center;
}

.btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap: 8px;
  padding: 10px 14px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--surface);
  color: rgba(28,31,29,0.92);
  font-size: 13px;
  transition: transform .15s ease, box-shadow .15s ease, background .15s ease, border-color .15s ease;
}
.btn:hover{
  transform: translateY(-1px);
  box-shadow: var(--shadow-1);
}
.btn:active{
  transform: translateY(0);
  box-shadow: none;
}
.btn-primary{
  background: var(--primary);
  border-color: var(--primary);
  color: #fff;
}
.btn-primary:hover{
  background: var(--primary-2);
  border-color: var(--primary-2);
}

.btn.btn-ink{
  background: #111;
  border-color: #111;
  color: #fff;
}
.btn.btn-ink:hover{
  background: #000;
  border-color: #000;
}

.btn-secondary{
  background: var(--surface);
}

.icon-btn{
  width: 40px;
  height: 40px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,0.9);
  display:inline-flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  transition: box-shadow .15s ease, transform .15s ease;
}
.icon-btn:hover{
  transform: translateY(-1px);
  box-shadow: var(--shadow-1);
}

.icon-bars{
  width: 18px;
  height: 12px;
  display:block;
  background:
    linear-gradient(var(--text), var(--text)) 0 0/100% 2px,
    linear-gradient(var(--text), var(--text)) 0 5px/100% 2px,
    linear-gradient(var(--text), var(--text)) 0 10px/100% 2px;
  background-repeat:no-repeat;
  opacity: .85;
}
.icon-close{
  width: 16px;
  height: 16px;
  display:block;
  position: relative;
}
.icon-close::before,
.icon-close::after{
  content:"";
  position:absolute;
  left: 7px;
  top: 0;
  width: 2px;
  height: 16px;
  background: var(--text);
  opacity: .8;
  border-radius: 999px;
}
.icon-close::before{ transform: rotate(45deg); }
.icon-close::after{ transform: rotate(-45deg); }

/* Mobile menu */
.mobile-menu{
  position: fixed;
  inset: 0;
  background: rgba(255,255,255,0.78);
  backdrop-filter: blur(14px);
  z-index: 60;
}
.mobile-menu-inner{
  max-width: 560px;
  margin: 0 auto;
  padding: 18px var(--gutter) 24px;
}
.mobile-menu-top{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding: 10px 0 16px;
}
.mobile-title{
  font-weight: 700;
  letter-spacing: .02em;
}
.mobile-links{
  display:flex;
  flex-direction:column;
  gap: 10px;
  padding: 8px 0 18px;
}
.mobile-link{
  padding: 14px 14px;
  border-radius: 14px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,0.9);
  font-weight: 600;
  transition: transform .15s ease, box-shadow .15s ease;
}
.mobile-link:hover{
  transform: translateY(-1px);
  box-shadow: var(--shadow-1);
}

.mobile-meta{
  border-top: 1px solid var(--border);
  padding-top: 14px;
  color: var(--muted);
  font-size: 13px;
}
.mobile-meta-row{
  display:flex;
  justify-content:space-between;
  gap: 10px;
  padding: 6px 0;
}
.meta-label{
  opacity: .9;
}
.meta-value{
  text-align:right;
}

/* Responsive nav toggle */
@media (max-width: 980px){
  :root{ --gutter: 16px; }
  .nav{ display:none; }
  .btn.btn-primary{ display:none; } /* keep header simple on mobile; contact inside menu */
}
@media (min-width: 981px){
  #menuBtn{ display:none; }
}

/* ========== Main ========== */
.site-main{
  min-height: calc(100vh - 240px);
}

/* Sections */
.section{
  padding: 72px 0;
}
@media (max-width: 640px){
  .section{ padding: 56px 0; }
}

.section-head{
  display:flex;
  align-items:flex-end;
  justify-content:space-between;
  gap: 18px;
  margin-bottom: 22px;
}
.section-title{
  font-family: ui-serif, "Hiragino Mincho ProN", "Noto Serif JP", Georgia, serif;
  font-weight: 700;
  letter-spacing: .01em;
  font-size: 28px;
  line-height: 1.25;
}
.section-lead{
  color: var(--muted);
  max-width: 60ch;
  margin-top: 8px;
  font-size: 14px;
}

.kicker{
  font-size: 12px;
  color: rgba(92,98,94,0.9);
  letter-spacing: .14em;
  text-transform: uppercase;
}

.link-arrow{
  font-size: 13px;
  color: rgba(47,107,62,0.95);
  display:inline-flex;
  gap: 8px;
  align-items:center;
  padding: 10px 12px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,0.9);
}
.link-arrow:hover{
  box-shadow: var(--shadow-1);
  transform: translateY(-1px);
}

/* Hero */
.hero{
  position: relative;
  min-height: 72vh;
  display:flex;
  align-items:flex-end;
  overflow:hidden;
  border-bottom: 1px solid var(--border);
  background: #000;
}
@media (max-width: 640px){
  .hero{ min-height: 60vh; }
}
.hero-slide{
  position:absolute;
  inset:0;
  background-size: cover;
  background-position: center;
  opacity: 0;
  transform: scale(1.02);
  transition: opacity 900ms ease, transform 2500ms ease;
  filter: saturate(1.02);
}
.hero-slide.active{
  opacity: 1;
  transform: scale(1.00);
}
.hero-overlay{
  position:absolute;
  inset:0;
  background:
    linear-gradient(180deg, rgba(0,0,0,0.15), rgba(0,0,0,0.55) 75%, rgba(0,0,0,0.72));
}
.hero-inner{
  position: relative;
  width: 100%;
  padding: 44px 0 48px;
}
.hero-card{
  max-width: 720px;
  background: rgba(255,255,255,0.92);
  border: 1px solid rgba(230,232,226,0.9);
  border-radius: 22px;
  box-shadow: 0 24px 60px rgba(0,0,0,0.12);
  padding: 22px 22px 18px;
}
.hero-title{
  font-family: ui-serif, "Hiragino Mincho ProN", "Noto Serif JP", Georgia, serif;
  font-size: 36px;
  line-height: 1.15;
  margin: 0;
}
@media (max-width: 640px){
  .hero-title{ font-size: 28px; }
}
.hero-sub{
  margin: 10px 0 18px;
  color: rgba(28,31,29,0.80);
  font-size: 14px;
  max-width: 58ch;
}
.hero-cta{
  display:flex;
  flex-wrap:wrap;
  gap: 10px;
}

.badge-row{
  display:flex;
  gap: 8px;
  flex-wrap:wrap;
  margin-top: 12px;
}
.badge{
  font-size: 12px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(243,244,240,0.8);
  color: rgba(28,31,29,0.85);
}

/* Grid */
.grid{
  display:grid;
  gap: 18px;
}
.grid.cols-3{ grid-template-columns: repeat(3, 1fr); }
.grid.cols-2{ grid-template-columns: repeat(2, 1fr); }
@media (max-width: 1024px){
  .grid.cols-3{ grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 640px){
  .grid.cols-2, .grid.cols-3{ grid-template-columns: 1fr; }
}

/* Cards */
.card{
  background: rgba(255,255,255,0.96);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  overflow:hidden;
  box-shadow: none;
  transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
}
.card:hover{
  transform: translateY(-2px);
  box-shadow: var(--shadow-1);
  border-color: rgba(230,232,226,0.8);
}
.card-media{
  aspect-ratio: 16/9;
  background: var(--surface-2);
}
.card-media img{
  width:100%;
  height:100%;
  object-fit: cover;
}
.card-body{
  padding: 16px 16px 16px;
}
.card-kicker{
  font-size: 12px;
  letter-spacing: .12em;
  text-transform: uppercase;
  color: rgba(92,98,94,0.92);
}
.card-title{
  margin: 6px 0 8px;
  font-weight: 700;
  letter-spacing: 0.01em;
}
.card-text{
  color: var(--muted);
  font-size: 14px;
}
.card-meta{
  margin-top: 14px;
  display:flex;
  justify-content:space-between;
  gap: 10px;
  align-items:center;
  color: rgba(92,98,94,0.92);
  font-size: 12px;
}

.pill{
  display:inline-flex;
  align-items:center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(250,250,247,0.8);
  font-size: 12px;
  color: rgba(28,31,29,0.86);
}
.pill a{ color: rgba(47,107,62,0.95); }

.split{
  display:grid;
  grid-template-columns: 1.1fr 0.9fr;
  gap: 20px;
  align-items:start;
}
@media (max-width: 980px){
  .split{ grid-template-columns: 1fr; }
}

/* Rich text */
.rich{
  max-width: 70ch;
  font-size: 16px;
}
.rich p{ margin: 0 0 14px; }
.rich h2{
  font-family: ui-serif, "Hiragino Mincho ProN", "Noto Serif JP", Georgia, serif;
  font-size: 22px;
  margin: 28px 0 10px;
}
.rich h3{
  font-size: 18px;
  margin: 20px 0 8px;
}
.rich small{ color: var(--muted); }

.hr{
  border: none;
  border-top: 1px solid var(--border);
  margin: 18px 0;
}

/* Forms */
.form{
  background: rgba(255,255,255,0.96);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 18px;
}
.field{
  display:flex;
  flex-direction:column;
  gap: 6px;
  margin-bottom: 12px;
}
.label{
  font-size: 13px;
  color: rgba(28,31,29,0.86);
  font-weight: 600;
}
.input, .select, .textarea{
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 12px 12px;
  background: #fff;
  font-size: 14px;
  outline:none;
  transition: border-color .15s ease, box-shadow .15s ease;
}
.input:focus, .select:focus, .textarea:focus{
  border-color: rgba(47,107,62,0.45);
  box-shadow: 0 0 0 4px rgba(47,107,62,0.12);
}
.textarea{
  min-height: 120px;
  resize: vertical;
}
.help{
  font-size: 12px;
  color: rgba(92,98,94,0.92);
}
.checkbox{
  display:flex;
  gap: 10px;
  align-items:flex-start;
  padding: 10px 12px;
  border: 1px solid var(--border);
  border-radius: 12px;
  background: rgba(250,250,247,0.6);
}
.checkbox input{ margin-top: 3px; }
.checkbox strong{ font-size: 13px; }
.checkbox span{ font-size: 12px; color: var(--muted); }

/* Footer */
.site-footer{
  border-top: 1px solid var(--border);
  background: rgba(255,255,255,0.65);
  margin-top: 30px;
}
.footer-grid{
  display:grid;
  grid-template-columns: 1.2fr 0.7fr 0.7fr;
  gap: 24px;
  padding: 34px 0 18px;
}
@media (max-width: 980px){
  .footer-grid{ grid-template-columns: 1fr; }
}
.footer-name{
  font-weight: 800;
  letter-spacing: .02em;
}
.footer-desc{
  color: var(--muted);
  margin-top: 10px;
  font-size: 13px;
  max-width: 55ch;
}
.footer-title{
  font-weight: 700;
  margin-bottom: 10px;
}
.footer-link{
  display:block;
  font-size: 13px;
  color: rgba(28,31,29,0.84);
  padding: 6px 0;
}
.footer-link:hover{
  color: rgba(47,107,62,0.95);
}
.footer-text{
  color: var(--muted);
  font-size: 13px;
  margin-bottom: 10px;
}
.footer-bottom{
  border-top: 1px solid var(--border);
  padding: 12px 0 18px;
  display:flex;
  justify-content:space-between;
  gap: 14px;
  flex-wrap:wrap;
  color: rgba(92,98,94,0.92);
  font-size: 12px;
}
.copyright{
  letter-spacing: .02em;
}

/* Subtle "year wobble" in Phase3+ (realistic: slight flicker) */
body[data-phase="3"] .copyright,
body[data-phase="4"] .copyright{
  animation: yearWobble 7s ease-in-out infinite;
}
@keyframes yearWobble{
  0%, 88% { opacity: 1; filter: none; }
  90% { opacity: .92; filter: blur(.3px); }
  92% { opacity: 1; filter: none; }
  96% { opacity: .96; filter: blur(.25px); }
  100% { opacity: 1; filter: none; }
}

/* Overlay modal */
.overlay{
  position: fixed;
  inset: 0;
  z-index: 70;
  background: rgba(10,12,10,0.42);
  backdrop-filter: blur(6px);
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 18px;
}
.overlay-inner{
  width: min(980px, 100%);
  max-height: 86vh;
  overflow:auto;
  background: rgba(255,255,255,0.98);
  border: 1px solid rgba(230,232,226,0.9);
  border-radius: 18px;
  box-shadow: 0 30px 70px rgba(0,0,0,0.20);
  position: relative;
}
.overlay-close{
  position: sticky;
  top: 12px;
  margin-left: auto;
  margin-right: 12px;
  margin-top: 12px;
  width: 40px;
  height: 40px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,0.95);
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
}
.overlay-body{
  padding: 6px 18px 18px;
}

/* Phase transition flash: keep subtle */
.phase-flash{
  position: fixed;
  inset: 0;
  pointer-events:none;
  z-index: 80;
  opacity: 0;
  background:
    radial-gradient(circle at 20% 10%, rgba(255,255,255,0.18), transparent 45%),
    radial-gradient(circle at 70% 30%, rgba(255,255,255,0.12), transparent 50%),
    linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
  mix-blend-mode: screen;
  transition: opacity 450ms ease;
}
.phase-flash.on{ opacity: 1; }

/* Motion preference */
@media (prefers-reduced-motion: reduce){
  *{ transition: none !important; animation: none !important; }
}
